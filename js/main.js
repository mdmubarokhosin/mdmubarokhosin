async function loadConfig(){const e=await Promise.all(["telegram.json","links.json","portfolio.json","experience.json","projects.json","navigation.json","ui.json"].map((e=>fetch(`./config/${e}`))));for(const t of e)if(!t.ok)throw new Error(`Failed to fetch ${t.url}: ${t.statusText}`);const[t,o,a,r,n,i,s]=await Promise.all(e.map((e=>e.json())));return{telegram:t,links:o,portfolio:a,experience:r,projects:n,navigation:i,iconMap:s.iconMap,categoryNames:s.categoryNames}}function initializeApp(e){const t={navContainer:document.getElementById("nav-container"),contentSections:document.querySelectorAll(".content-section"),linksSection:document.getElementById("linksSection"),portfolioSection:document.getElementById("portfolioSection"),experienceSection:document.getElementById("experienceSection"),projectsSection:document.getElementById("projectsSection"),contactSection:document.getElementById("contactSection")},o={activeSection:"linksSection",searchQuery:"",activeCategory:"all"},a=()=>{(e=>{const t="!<>-_\\/[]{}â€”=+*^?#_";document.querySelectorAll(e).forEach((e=>{if(e.dataset.scrambleApplied)return;e.dataset.scrambleApplied="true";const o=e.dataset.originalText||e.textContent;e.dataset.originalText=o;let a=null;const r=()=>{let r=0;clearInterval(a),a=setInterval((()=>{e.innerText=o.split("").map(((e,a)=>a<r?o[a]:/\s/.test(e)?e:t[Math.floor(19*Math.random())])).join(""),r>=o.length&&(clearInterval(a),e.innerText=o),r+=.5}),30)};e.addEventListener("mouseenter",r),e.addEventListener("click",r),e.addEventListener("mouseleave",(()=>{clearInterval(a),e.innerText=o}))}))})(["h1.font-bold","#floating-nav .nav-link span","#categoryFilter button","#linksGrid .group span","#portfolioSection h3","#portfolioSection .mt-4 a","#experienceSection h3","#experienceSection p.text-sm","#projectsSection h3","#projectsSection .mt-4 a","#submitBtn"].join(", "))},r=()=>{n(),i(),s(),l(),c()},n=()=>{t.linksSection.innerHTML='<div class="flex flex-col items-center mb-8 animate-card"><div class="relative w-full max-w-md"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><i class="bi bi-search text-[color:var(--ui-fg-muted)]"></i></div><input id="searchInput" type="text" class="block w-full pl-10 pr-10 py-2 border border-[color:var(--ui-border-base)] rounded-lg bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-black" placeholder="Search links..."><div id="searchClear" class="absolute inset-y-0 right-0 pr-3 flex items-center hidden cursor-pointer"><i class="bi bi-x-lg text-gray-400 hover:text-black"></i></div></div><div id="categoryFilter" class="flex flex-wrap justify-center gap-2 mt-4 w-full max-w-2xl"></div></div><div id="linksGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4"></div><div id="noResults" class="hidden text-center py-10"><i class="bi bi-emoji-frown text-4xl text-[color:var(--ui-fg-muted)] mb-4"></i><h3 class="text-xl font-medium">No links found</h3><p class="text-[color:var(--ui-fg-muted)] mt-2">Try a different search term or category</p></div>',g(),u(),m(e.links)},i=()=>{t.portfolioSection.innerHTML='<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>';const o=t.portfolioSection.firstChild;e.portfolio.forEach(((e,t)=>{const a=document.createElement("div");a.className="animate-card bg-white border border-[color:var(--ui-border-base)] rounded-lg shadow-sm overflow-hidden transition-all duration-300 hover:shadow-xl hover:border-black hover:-translate-y-1",a.style.setProperty("--animation-delay",100*t+"ms"),a.innerHTML=`<div class="overflow-hidden"><img src="${e.image}" alt="${e.title}" class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"></div><div class="p-5"><h3 class="text-lg font-semibold">${e.title}</h3><p class="text-sm text-[color:var(--ui-fg-muted)] mt-1">${e.description}</p><div class="mt-4 flex space-x-4"><a href="${e.liveUrl}" target="_blank" class="text-sm font-medium hover:underline">Live Demo <i class="bi bi-arrow-up-right ml-1"></i></a><a href="${e.detailsUrl}" target="_blank" class="text-sm font-medium hover:underline">Details</a></div></div>`,o.appendChild(a)}))},s=()=>{t.experienceSection.innerHTML='<div class="max-w-3xl mx-auto"><div class="space-y-8"></div></div>';const o=t.experienceSection.querySelector(".space-y-8");e.experience.forEach(((e,t)=>{const a=e.duties.map((e=>`<li>${e}</li>`)).join(""),r=document.createElement("div");r.className="animate-card flex",r.style.setProperty("--animation-delay",100*t+"ms"),r.innerHTML=`<div class="flex flex-col items-center mr-4"><div><div class="flex items-center justify-center w-10 h-10 bg-gray-100 rounded-full text-black text-base"><i class="bi ${e.icon}"></i></div></div><div class="w-px h-full bg-[color:var(--ui-border-base)]"></div></div><div class="pb-8"><p class="mb-1 text-sm text-[color:var(--ui-fg-muted)]">${e.date}</p><h3 class="font-semibold">${e.title}</h3><p class="text-sm text-[color:var(--ui-fg-muted)]">${e.company}</p><ul class="mt-2 ml-4 list-disc text-sm text-[color:var(--ui-fg-muted)] space-y-1">${a}</ul></div>`,o.appendChild(r)}))},l=()=>{t.projectsSection.innerHTML='<div class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>';const o=t.projectsSection.firstChild;e.projects.forEach(((e,t)=>{const a=e.tags.map((e=>`<span class="flex items-center text-xs font-medium bg-gray-100 text-gray-800 px-2.5 py-1 rounded-full"><i class="bi ${e.icon} mr-1.5"></i> ${e.name}</span>`)).join(""),r=document.createElement("div");r.className="animate-card bg-white border border-[color:var(--ui-border-base)] rounded-lg shadow-sm p-5 flex flex-col transition-all duration-300 hover:shadow-xl hover:border-black hover:-translate-y-1",r.style.setProperty("--animation-delay",100*t+"ms"),r.innerHTML=`<h3 class="text-lg font-semibold">${e.title}</h3><p class="text-sm text-[color:var(--ui-fg-muted)] mt-1 flex-grow">${e.description}</p><div class="mt-4 flex flex-wrap gap-2">${a}</div><div class="mt-4 pt-4 border-t border-[color:var(--ui-border-base)] flex space-x-4"><a href="${e.sourceUrl}" target="_blank" class="text-sm font-medium hover:underline inline-flex items-center"><i class="bi bi-github mr-1.5"></i>View Source</a><a href="${e.liveUrl}" target="_blank" class="text-sm font-medium hover:underline inline-flex items-center"><i class="bi bi-arrow-up-right mr-1.5"></i>Live Demo</a></div>`,o.appendChild(r)}))},c=()=>{t.contactSection.innerHTML='<div class="animate-card max-w-2xl mx-auto bg-white border border-[color:var(--ui-border-base)] rounded-lg shadow-sm p-6 sm:p-8"><h2 class="text-xl font-semibold text-center">Get In Touch</h2><p class="text-sm text-[color:var(--ui-fg-muted)] text-center mt-2">Have a question or want to work together? Send me a message!</p><form id="contactForm" class="mt-6 space-y-4"><div><label for="name" class="block text-sm font-medium text-[color:var(--ui-fg-muted)]">Name</label><input type="text" id="name" name="name" class="mt-1 block w-full px-3 py-2 bg-white border border-[color:var(--ui-border-base)] rounded-md shadow-sm focus:outline-none focus:ring-black" required></div><div><label for="email" class="block text-sm font-medium text-[color:var(--ui-fg-muted)]">Email</label><input type="email" id="email" name="email" class="mt-1 block w-full px-3 py-2 bg-white border border-[color:var(--ui-border-base)] rounded-md shadow-sm focus:outline-none focus:ring-black" required></div><div><label for="message" class="block text-sm font-medium text-[color:var(--ui-fg-muted)]">Message</label><textarea id="message" name="message" rows="4" class="mt-1 block w-full px-3 py-2 bg-white border border-[color:var(--ui-border-base)] rounded-md shadow-sm focus:outline-none focus:ring-black" required></textarea></div><div><button type="submit" id="submitBtn" class="w-full inline-flex justify-center py-2.5 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-white hover:text-black hover:border-black transition-colors duration-300">Send Message</button></div><p id="formStatus" class="text-center text-sm mt-2"></p></form></div>',document.getElementById("contactForm").addEventListener("submit",d)},d=async t=>{t.preventDefault();const o=t.target,r=o.querySelector("#submitBtn"),n=o.querySelector("#formStatus"),{name:i,email:s,message:l}=o.elements;r.disabled=!0,r.textContent="Sending...",n.textContent="";const c=`New Message from Portfolio\n\n*Name:* ${i.value}\n*Email:* ${s.value}\n\n*Message:*\n${l.value}`,d=`https://api.telegram.org/bot${e.telegram.botToken}/sendMessage`;try{const t=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:e.telegram.chatId,text:c,parse_mode:"Markdown"})}),a=await t.json();if(!a.ok)throw new Error(a.description);n.textContent="Message sent successfully!",n.style.color="green",o.reset()}catch(e){n.textContent="Failed to send message.",n.style.color="red"}finally{r.disabled=!1,r.textContent="Send Message",a()}},m=t=>{const a=document.getElementById("linksGrid"),r=document.getElementById("noResults");a.innerHTML="",r.classList.toggle("hidden",t.length>0),t.forEach(((t,r)=>{const n=t.platform.toLowerCase().replace(/[^a-z0-9]/g,""),i=e.iconMap[n]||e.iconMap.default,s=document.createElement("a");s.href=t.url,s.target="_blank",s.rel="noopener noreferrer",s.className="group animate-card flex items-center justify-between p-4 bg-white border border-[color:var(--ui-border-base)] rounded-lg shadow-sm hover:shadow-lg hover:border-black hover:-translate-y-1 active:scale-[0.98] transition-all duration-300 ease-in-out",s.style.setProperty("--animation-delay",30*r+"ms");const l=o.searchQuery?t.platform.replace(new RegExp(`(${o.searchQuery.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"gi"),'<span class="search-highlight">$1</span>'):t.platform;s.innerHTML=`<div class="flex items-center"><i class="bi ${i} text-xl text-[color:var(--ui-fg-muted)] transition-colors group-hover:text-black"></i><span class="ml-4 font-medium text-[color:var(--ui-fg-muted)] transition-colors group-hover:text-black">${l}</span></div><i class="bi-arrow-up-right text-lg text-[color:var(--ui-fg-muted)] group-hover:text-black transition-colors"></i>`,a.appendChild(s)}))},u=()=>{const t=document.getElementById("categoryFilter"),r=["all",...new Set(e.links.map((e=>e.category)))];t.innerHTML="",r.forEach(((r,n)=>{const i=document.createElement("button"),s=o.activeCategory===r;i.className="px-3 py-1 rounded-full text-sm font-medium transition-colors border "+(s?"bg-black text-white border-black":"bg-white text-black border-gray-300 hover:bg-gray-100"),i.textContent="all"===r?"All":e.categoryNames[r]||r,i.classList.add("animate-card"),i.style.setProperty("--animation-delay",50*n+"ms"),i.addEventListener("click",(()=>{o.activeCategory=r,u(),m(p()),setTimeout((()=>a()),50)})),t.appendChild(i)}))},p=()=>e.links.filter((e=>("all"===o.activeCategory||e.category===o.activeCategory)&&(!o.searchQuery||e.platform.toLowerCase().includes(o.searchQuery.toLowerCase())))),g=()=>{const e=document.getElementById("searchInput"),t=document.getElementById("searchClear");e.addEventListener("input",(e=>{o.searchQuery=e.target.value.trim(),t.classList.toggle("hidden",!o.searchQuery),m(p())})),t.addEventListener("click",(()=>{e.value="",o.searchQuery="",t.classList.add("hidden"),m(p())}))},f=()=>{t.navContainer.innerHTML="",e.navigation.forEach((e=>{const o=document.createElement("button");o.className="nav-link",o.dataset.target=e.id,o.innerHTML=`<i class="bi ${e.icon}"></i><span class="pb-[3px]">${e.name}</span>`,t.navContainer.appendChild(o)})),document.querySelectorAll(".nav-link").forEach((e=>{e.addEventListener("click",(()=>v(e.dataset.target)))}))},v=(r,n=!1)=>{o.activeSection=r,t.contentSections.forEach((e=>{const t=e.id===r;e.classList.toggle("hidden",!t),e.classList.toggle("fade-in-section",t)})),document.querySelectorAll(".nav-link").forEach((t=>{const o=t.dataset.target===r,a=e.navigation.find((e=>e.id===t.dataset.target));t.classList.toggle("active",o),t.querySelector("i").className=`bi ${o?a.activeIcon:a.icon}`})),n||window.scrollTo({top:0,behavior:"smooth"}),setTimeout((()=>a()),50)},b=e=>{const t=document.getElementById("schema-data");if(t){const o=JSON.parse(t.textContent);o.sameAs=e.map((e=>e.url)),t.textContent=JSON.stringify(o,null,2)}};(()=>{const t=window.location.pathname.split("/").filter(Boolean);if(0===t.length)return!1;const o=t[t.length-1];if(!o)return!1;const a=e.links.find((e=>e.platform.toLowerCase().replace(/[^a-z0-9]/g,"")===o.toLowerCase().replace(/[^a-z0-9]/g,"")));if(a){const e=document.getElementById("loader");return e.style.display="flex",e.style.opacity="1",e.querySelector("p").textContent=`Redirecting to ${new URL(a.url).hostname}...`,setTimeout((()=>{window.location.replace(a.url)}),100),!0}return!1})()||(b(e.links),r(),f(),a(),v(o.activeSection,!0))}document.addEventListener("DOMContentLoaded",(async()=>{const e=document.getElementById("loader");e.style.display="flex",e.style.opacity="1",e.querySelector("#loader-text").textContent="Loading assets...";try{initializeApp(await loadConfig())}catch(e){console.error("Failed to load configuration:",e),document.getElementById("pageContent").style.display="none",document.getElementById("floating-nav").style.display="none",document.getElementById("errorContainer").style.display="block"}finally{e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),300)}}));
